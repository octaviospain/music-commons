import org.gradle.api.JavaVersion

plugins {
    id 'org.sonarqube' version '3.3'
    id "org.openjfx.javafxplugin" version "0.0.13"
}

group 'net.transgressoft'
version gitVersion()
description 'Transgressoft Music Commons - JavaFX'

project.tasks['sonarqube'].dependsOn 'compileJava'

dependencies {
    api project(path: ':music-commons-api')
    api project(path: ':music-commons-core')
}

javafx {
    version = JavaVersion.VERSION_11
    modules = ['javafx.controls']
}

publishing {
    publications {
        maven(org.gradle.api.publish.maven.MavenPublication) {
            groupId group
            artifactId 'music-commons-fx'
            version version

            from components.java
            artifact sourceJar
            artifact javadocJar

            pom {
                name = 'music-commons-core'
                description = 'Transgressoft Music Commons - JavaFX'
                licenses {
                    license {
                        name = 'GNU General Public License v3'
                        url = 'https://www.gnu.org/licenses/gpl-3.0.en.html'
                    }
                }
                developers {
                    developer {
                        id = 'octaviospain'
                        name = 'Octavio Calleya Garc√≠a'
                        email = 'octaviospain@gmail.com'
                    }
                }
            }
        }
    }

    repositories {
        maven {
            credentials {
                username = 'admin'
                password = project.repoPass
            }
            mavenContent {
                snapshotsOnly()
            }

            name 'pi-repo-snapshots'
            url 'https://nexus.transgressoft.net/repository/maven-snapshots/'
            allowInsecureProtocol = true
        }
        maven {
            credentials {
                username = 'admin'
                password = project.repoPass
            }
            mavenContent {
                releasesOnly()
            }

            name 'pi-repo-releases'
            url 'https://nexus.transgressoft.net/repository/maven-releases/'
            allowInsecureProtocol = true
        }
    }
}

repositories {
    mavenCentral()
}
