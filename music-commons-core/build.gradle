plugins {
    id 'org.sonarqube' version '3.3'
}

group = 'net.transgressoft'
version gitVersion()
description = 'Transgressoft Music Commons - Core'

project.tasks["sonarqube"].dependsOn "compileJava"

dependencies {
    implementation 'be.tarsos:transcoder:1.2'
    implementation 'com.neovisionaries:nv-i18n:1.29'
    implementation 'net.jthink:jaudiotagger:3.0.1'
    implementation 'net.transgressoft:soft-query-mem:0.5'
    implementation 'org.apache.commons:commons-io:1.3.2'
    implementation 'org.apache.commons:commons-text:1.9'
    implementation 'org.slf4j:slf4j-api:2.0.0-alpha1'


    testImplementation 'com.google.truth:truth:1.1.3'
    testImplementation 'ch.qos.logback:logback-core:1.3.0-alpha5'
    testImplementation 'org.mockito:mockito-core:4.4.0'
    testImplementation(platform('org.junit:junit-bom:5.9.0-M1'))
    testImplementation('org.junit.jupiter:junit-jupiter')

    testRuntimeOnly 'ch.qos.logback:logback-classic:1.3.0-alpha5'
}

publishing {
    publications {
        maven(MavenPublication) {
            groupId group
            artifactId 'music-commons-core'
            version version

            from components.java

            pom {
                name = "music-commons-core"
                description = 'Transgressoft Music Commons - Core'
                licenses {
                    license {
                        name = "GNU General Public License v3"
                        url = "https://www.gnu.org/licenses/gpl-3.0.en.html"
                    }
                }
                developers {
                    developer {
                        id = "octaviospain"
                        name = "Octavio Calleya Garc√≠a"
                        email = "octaviospain@gmail.com"
                    }
                }
            }
        }
    }

    repositories {
        maven {
            credentials {
                username = 'admin'
                password = 'nexus2885mwggyk'
            }

            name = 'pi-repo'
            url = 'http://nexus.pipon.xxx/repository/maven-releases/'
            allowInsecureProtocol = true
        }
    }
}

